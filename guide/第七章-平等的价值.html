<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>平等的价值 | JavaScript 心智💗模型</title>
    <meta name="description" content="Vite & Vue powered static site generator.">
    <link rel="stylesheet" href="/javascript-mental-models/assets/style.e6ac6c2e.css">
    <link rel="modulepreload" href="/javascript-mental-models/assets/chunks/AlgoliaSearchBox.1a37182a.js">
    <link rel="modulepreload" href="/javascript-mental-models/assets/app.c931d240.js">
    <link rel="modulepreload" href="/javascript-mental-models/assets/guide_第七章-平等的价值.md.4a93fb7c.lean.js">
    
    <meta name="twitter:title" content="平等的价值 | JavaScript 心智💗模型">
  <meta property="og:title" content="平等的价值 | JavaScript 心智💗模型">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/javascript-mental-models/" aria-label="JavaScript 心智💗模型, back to home" data-v-675d8756 data-v-cc01ef16><!----> JavaScript 心智💗模型</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/javascript-mental-models/guide" data-v-b8818f8c>Start <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>About ME <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer/javascript-mental-models" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/javascript-mental-models/guide" data-v-b8818f8c>Start <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>About ME <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/sudongyuer/javascript-mental-models" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">开始探索我们的JavaScript宇宙吧🌈</p><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第一章-心智模型">第一章-什么是心智模型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第二章-JavaScript宇宙">第二章-JavaScript宇宙</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第三章-值与变量">第三章-值与变量</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第四章-从内部学习">第四章-从内部学习</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第五章-会见原始值">第五章-会见原始值</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第六章-会见对象与函数">第六章-会见对象与函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/javascript-mental-models/guide/第七章-平等的价值">第七章-平等的价值</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#kinds-of-equality">Kinds of Equality</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#object-is-a-b">Object.is(a,b)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#严格相等">严格相等</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#宽松的平等">宽松的平等</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#回顾">回顾</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第八章-Properties(属性)">第八章-Properties(属性)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第九章-突变">第九章-突变</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-mental-models/guide/第十章-原型">第十章-原型</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="平等的价值" tabindex="-1">平等的价值 <a class="header-anchor" href="#平等的价值" aria-hidden="true">#</a></h1><blockquote><p>想象一下，参加一个只有几种面具的狂欢节。一群穿着相同服装的人会在房间里开玩笑、跳舞、走动。这会让人困惑!你可能会和两个人交谈，却没有意识到你实际上是在和同一个人交谈两次。或者你可能认为你在和一个人说话，但实际上，你在和两个不同的人说话!</p></blockquote><p>如果您在JavaScript中没有一个明确的平等的心智模型，那么每天都像狂欢节一样——而且不是以一种好的方式。你无法确定你处理的是相同的值，还是两个不同的值。因此，您经常会犯错误——比如更改一个您不打算更改的值。 幸运的是，我们已经完成了在JavaScript中建立平等概念的大部分工作。它以一种非常自然的方式符合我们的心智模式。</p><h2 id="kinds-of-equality" tabindex="-1">Kinds of Equality <a class="header-anchor" href="#kinds-of-equality" aria-hidden="true">#</a></h2><p>在JavaScript中，有几种相等，如果你已经写过JS了，你应该对下面的几种相等不陌生</p><ul><li><strong>Strict Equality:</strong> <code>a === b</code> (triple equals).</li><li><strong>Loose Equality:</strong> <code>a == b</code> (double equals).</li><li><strong>Same Value Equality:</strong> <code>Object.is(a, b)</code>.</li></ul><h2 id="object-is-a-b" tabindex="-1"><a href="http://Object.is" target="_blank" rel="noopener noreferrer">Object.is</a>(a,b) <a class="header-anchor" href="#object-is-a-b" aria-hidden="true">#</a></h2><p>在JavaScript中，<code>Object.is(a,b)</code>告诉我们a和b是否有相同的值</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><p>这叫做相同的值相等。</p><p>尽管方法名是<code>Object.is</code>并不特定于对象。它可以比较任意两个值，不管它们是否是对象!</p><p>检查一下你的直觉🥳</p><div class="language-js"><pre><code><span class="token keyword">let</span> dwarves <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> continents <span class="token operator">=</span> <span class="token string">&#39;7&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> worldWonders <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre></div><p>提示一下：这段代码的心智模型是如下的</p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0od7nvx2wj20vq0g6gmw.jpg" alt="image-20220327131519517" style="zoom:50%;"><p>现在，尝试告诉我一下下面代码的答案</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>dwarves<span class="token punctuation">,</span> continents<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>continents<span class="token punctuation">,</span> worldWonders<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>worldWonders<span class="token punctuation">,</span> dwarves<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
</code></pre></div><p>下面是答案👇:</p><ol><li><code>Object.is(dwarves, continents)</code> 是 <strong><code>false</code></strong> 因为 <code>dwarves</code> 和 <code>continents</code> <strong>指向不同的值</strong>.</li><li><code>Object.is(continents, worldWonders)</code> 是 <strong><code>false</code></strong> 因为 <code>continents</code> 和 <code>worldWonders</code> <strong>指向不同的值</strong>.</li><li><code>Object.is(worldWonders, dwarves)</code> 是 <strong><code>true</code></strong> 因为 <code>worldWonders</code> 和 <code>dwarves</code> <strong>指向相同的值</strong>.</li></ol><p>但是对象呢? 到这里，您可能要担心对象了。您可能听说过等式对对象无效，或者它比较“引用”。如果你有这样的直觉，那就暂时把它们放在一边。 相反，请看下面的代码片段</p><div class="language-js"><pre><code><span class="token keyword">let</span> banana <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> cherry <span class="token operator">=</span> banana<span class="token punctuation">;</span>
<span class="token keyword">let</span> chocolate <span class="token operator">=</span> cherry<span class="token punctuation">;</span>
cherry <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>记住，{}总是表示“创建一个新的对象值”。另外，请记住=的意思是“将左侧的导线指向右侧的值”。</p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0odf6jywcj20qs0gwjs9.jpg" alt="image-20220327132233221" style="zoom:50%;"><p>现在再来解答一下下面的问题？👇</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>banana<span class="token punctuation">,</span> cherry<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>cherry<span class="token punctuation">,</span> chocolate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>chocolate<span class="token punctuation">,</span> banana<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
</code></pre></div><ol><li><code>Object.is(banana, cherry)</code> 是 <strong><code>false</code></strong> 因为 <code>banana</code> 和 <code>cherry</code> <strong>指向不同的值</strong>.</li><li><code>Object.is(cherry, chocolate)</code> 是 <strong><code>false</code></strong> 因为 <code>cherry</code> 和 <code>chocolate</code> <strong>指向不同的值</strong>.</li><li><code>Object.is(chocolate, banana)</code> 是 <strong><code>true</code></strong> 因为 <code>chocolate</code> 和 <code>banana</code> <strong>指向相同的值</strong>.</li></ol><p>正如您所看到的，我们不需要任何额外的概念来解释相同的值相等性如何适用于对象。它是通过我们的思维模式自然产生的。这就是我所知道的一切!</p><h2 id="严格相等" tabindex="-1">严格相等 <a class="header-anchor" href="#严格相等" aria-hidden="true">#</a></h2><p>您以前可能使用过严格相等操作符</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h4 id="同值平等与严格平等" tabindex="-1">同值平等与严格平等 <a class="header-anchor" href="#同值平等与严格平等" aria-hidden="true">#</a></h4><p><code>Object.is</code>和<code>===</code>有什么区别呢？</p><ul><li>Object.is和我们心智模型中的值相等保持一致</li><li>严格相同绝大部门情况下也和心智模型一致，但是也有一些特殊情况</li></ul><p>这两种不寻常的情况都涉及我们过去讨论过的“特殊数字”：</p><ol><li><strong><code>NaN === NaN</code>是<code>false</code></strong>，尽管它们的值相同。</li><li><strong><code>-0 === 0</code>并且<code>0 === -0</code>是<code>true</code></strong>，尽管它们是不同的值。</li></ol><h4 id="第一个特殊的例子-nan" tabindex="-1">第一个特殊的例子: <code>NaN</code> <a class="header-anchor" href="#第一个特殊的例子-nan" aria-hidden="true">#</a></h4><p><code>NaN</code> 是一个特殊的Number ,当我们做无效的数学时就会出现 <code>0 / 0</code>:</p><div class="language-js"><pre><code><span class="token keyword">let</span> width <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre></div><p>进一步的计算 <code>NaN</code> 也将会给你一个 <code>NaN</code> :</p><div class="language-js"><pre><code><span class="token keyword">let</span> height <span class="token operator">=</span> width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre></div><p>您可能不会故意这样做，但如果您的数据或计算存在缺陷，就会发生这种情况.</p><p><strong>记住 <code>NaN === NaN</code> 永远都是 <code>false</code>:</strong></p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>width <span class="token operator">===</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><p>然而, <code>NaN</code> 和 <code>NaN</code>是同一个值:</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0odsg0sxxj20us0dk3ze.jpg" alt="image-20220327133517952" style="zoom:33%;"><p>这很令人困惑。 NaN === NaN 为假的原因很大程度上是历史原因，所以我建议接受它作为生活的事实。如果您尝试编写一些检查值是否为 NaN 的代码（例如，打印警告），您可能会遇到这种情况。</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">resizeImage</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 这将永远不会被记录:检查永远是假的!</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Something is wrong.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>相反，这里有一些方法(它们都有效!)来检查size是否为NaN:</p><ul><li><strong><code>Number.isNaN(size)</code></strong></li><li><strong><code>Object.is(size, NaN)</code></strong></li><li><strong><code>size !== size</code></strong></li></ul><p>最后一个可能特别令人惊讶。给它一些时间。如果您没有看到它是如何检测NaN的，请尝试重新阅读这一节并再次思考它。</p><p>size !== size有效，因为NaN === NaN是假的，正如我们已经知道的。所以反过来(NaN !== NaN)一定是真的。 因为NaN是唯一不是严格等于自身的值，size !== size只能表示size是NaN。</p><p>一个简单的历史:<a href="https://stackoverflow.com/questions/1565164/what-is-the-rationale-for-all-comparisons-returning-false-for-ieee754-nan-values/1573715#1573715%E7%A1%AE%E4%BF%9D%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E8%83%BD%E5%A4%9F%E4%BB%A5%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%A3%80%E6%B5%8BNaN%E6%98%AF%E4%BD%BFNaN" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/1565164/what-is-the-rationale-for-all-comparisons-returning-false-for-ieee754-nan-values/1573715#1573715确保开发人员能够以这种方式检测NaN是使NaN</a> === NaN返回false的最初原因之一!这是在JavaScript出现之前就决定的</p><h4 id="第二个特殊的例子-0" tabindex="-1">第二个特殊的例子: <code>-0</code> <a class="header-anchor" href="#第二个特殊的例子-0" aria-hidden="true">#</a></h4><p>在普通数学中，没有“负0”这样的概念，但在浮点数学中却存在<a href="https://softwareengineering.stackexchange.com/a/280708" target="_blank" rel="noopener noreferrer">实际原因</a>。这里有一个有趣的事实。</p><p><strong>Both <code>0 === -0</code> and <code>-0 === 0</code> are always <code>true</code>:</strong></p><div class="language-js"><pre><code><span class="token keyword">let</span> width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">let</span> height <span class="token operator">=</span> <span class="token operator">-</span>width<span class="token punctuation">;</span> <span class="token comment">// -0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>width <span class="token operator">===</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>然而, <code>0</code> 和 <code>-0</code>不是同一个值:</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0ody80zf1j20sc0n6ab7.jpg" alt="image-20220327134050806" style="zoom:33%;"><h4 id="编码练习" tabindex="-1">编码练习 <a class="header-anchor" href="#编码练习" aria-hidden="true">#</a></h4><p>现在您知道了Object.is和=== 是如何工作的了，我有一个小的编码练习给你。你不需要完成它，但它是一个有趣的难题</p><p>写一个函数strictEquals(a, b)，返回与a === b相同的值。你的实现不能使用===或!==操作符。</p><p>下面是我的答案 🐥</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">strictEquals</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
            Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>   <span class="token comment">// sudongyuer🐟</span>
</code></pre></div><p>听到这些特殊的数字和他们的行为可能会让人不知所措。不要过分强调这些特殊情况! 它们并不常见。既然你知道它们的存在，你就会在实践中认识到它们。在大多数情况下，我们可以相信<code>Object.is (a, b)</code> 和 <code>a === b</code>。</p><h2 id="宽松的平等" tabindex="-1">宽松的平等 <a class="header-anchor" href="#宽松的平等" aria-hidden="true">#</a></h2><blockquote><p>松散等号(双等号)是JavaScript的梦魇。下面是几个让你起鸡皮疙瘩的例子:</p></blockquote><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>松散相等(也称为“抽象相等”)的规则是晦涩难懂的。许多编码标准完全禁止在代码中使用==和!=。 尽管Just JavaScript对应该或不应该使用哪些特性没有强烈的意见，但我们不会详细讨论松散相等性。它在现代代码库中并不常见，它的规则在语言或我们的思维模式中也没有发挥更大的作用</p><p>松散相等规则被广泛认为是JavaScript早期的一个糟糕设计决策，但如果您仍然好奇，可以在这里查看<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using" target="_blank" rel="noopener noreferrer">它是如何工作的</a>。不要觉得有压力要记住它——你需要记住其他话题!</p><p>值得了解的一个相对常见的用例是</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这段代码相当于这样写:</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> x <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然而，即使是==的使用也可能在一些团队中引起争议。在使用==之前，最好讨论一下在团队代码库中可以容忍多少==。</p><h2 id="回顾" tabindex="-1">回顾 <a class="header-anchor" href="#回顾" aria-hidden="true">#</a></h2><blockquote><p>JavaScript有几种等号。它们包括相同价值平等、严格平等和松散平等。</p></blockquote><ul><li>理解这种平等有助于防止错误!</li><li>你经常需要知道什么时候你在处理相同的值，什么时候你在处理两个不同的值。</li><li>当我们画一个值和变量的图时，相同的值不能出现两次。<code>Object.is(a,b)</code>当变量a和b指向图上相同的值时(a, b)为真。</li><li>相同的值，编写起来有点麻烦，但它也是最容易解释的，这就是我们开始使用它的原因</li></ul><p>在实践中，您将使用严格相等，或a === b，最常见的。除了两种罕见的特殊情况外，它等价于相同的值相等:</p><ul><li><p><code>NaN === NaN</code> 是 <code>false</code>, 即使它们是相同的值.</p></li><li><p><code>0 === -0</code> 和 <code>-0 === 0</code> 是 <code>true</code>, 但它们是不同的值.</p></li><li><p>你可以查看 <code>x</code> 是 <code>NaN</code> 通过 <code>Number.isNaN(x)</code>.</p></li><li><p><strong>Loose equality</strong> (<code>==</code>) 使用一组神秘的规则，通常会被避免.</p></li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><p class="last-updated" data-v-07c132fc data-v-abce3432><span class="prefix" data-v-abce3432>Last Updated:</span><span class="datetime" data-v-abce3432></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/javascript-mental-models/guide/第六章-会见对象与函数" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>第六章-会见对象与函数</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/javascript-mental-models/guide/第八章-Properties(属性)" data-v-38ede35f><span class="text" data-v-38ede35f>第八章-Properties(属性)</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_第一章-心智模型.md\":\"d2ed539c\",\"guide_第七章-平等的价值.md\":\"4a93fb7c\",\"guide_第三章-值与变量.md\":\"4e30e4fc\",\"guide_第九章-突变.md\":\"8e968c04\",\"guide_第二章-javascript宇宙.md\":\"b86c7542\",\"guide_第五章-会见原始值.md\":\"3feac74d\",\"guide_第八章-properties(属性).md\":\"d894c02f\",\"guide_第六章-会见对象与函数.md\":\"47adce98\",\"guide_第十章-原型.md\":\"c9f47ca3\",\"guide_第四章-从内部学习.md\":\"1b0af384\",\"index.md\":\"2158b8fd\"}")</script>
    <script type="module" async src="/javascript-mental-models/assets/app.c931d240.js"></script>
    
  </body>
</html>